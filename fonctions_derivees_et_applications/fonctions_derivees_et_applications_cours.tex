\documentclass[11pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{mdframed}
\usepackage{tikz}
\usepackage{tkz-tab}
\usepackage{wrapfig}
\usepackage{pgfplots}
\usepackage{xcolor}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{tabularx}
\pgfplotsset{compat=1.17}
\usepackage{multirow}
\usepackage[fleqn]{amsmath}
\setlength{\mathindent}{0pt}

% Défini les couleurs pour les graphiques
\definecolor{dark_green}{HTML}{008000}

% Extensions
\RequirePackage{geometry} 
\geometry{tmargin=1cm,bmargin=1.9cm,lmargin=1.9cm,rmargin=1.9cm}

% Paramètres du titre
\def\classe{$1^{\text{re}}$ Spécialité mathématiques}
\def\titre{Fonctions dérivées et applications}
\def\theme{Analyse - Cours}

% Paramètres de numérotation des pages
\fancypagestyle{custom}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \lfoot{Analyse - Cours et démos}
  \cfoot{Fonctions dérivées et applications}
  \rfoot{\thepage/\pageref{LastPage}}
}

% Définition d'un type de colonne centré
\newcolumntype{Y}{>{\centering\arraybackslash}X}

\usepackage{titlesec} % Pour personnaliser les titres
\usepackage{xcolor} % Pour définir des couleurs

\title{\titre}
\author{\classe \\ \theme}
\date{}

\renewcommand{\familydefault}{\sfdefault}

% Styles pour les mdframed
\mdfdefinestyle{definitionStyle}{
    leftline=true,
    rightline=false,
    topline=false,
    bottomline=false,
    linewidth=2pt,
    linecolor=black,
    innertopmargin=0pt,
    innerbottommargin=0pt,
    innerrightmargin=0pt,
    innerleftmargin=5pt,
}

\mdfdefinestyle{proprieteStyle}{
    linewidth=1pt,
    linecolor=black,
    innertopmargin=5pt,
    innerbottommargin=5pt,
    innerrightmargin=5pt,
    innerleftmargin=5pt,
}

% Supprime l'indentation des paragraphes
\setlength{\parindent}{0pt}

\begin{document}

\maketitle
\pagestyle{custom}
\thispagestyle{custom}

\section*{I. Fonctions dérivées}
\subsection*{1. Définition}

\begin{mdframed}[style=definitionStyle]
    \textbf{Définition :} ~\\
    Soit $f$ une fonction définie sur un intervalle $I$. \\
    Si, pour tout réel $a$ de $I$, le nombre dérivé $f'(a)$ existe, on dit que la fonction $f$ est dérivable sur $I$. \\
    On appelle fonction dérivée de $f$ sur $I$ la fonction qui, a tout réel $x\in I$ associe le réel $f'(x)$. \\
    On la note $f'$.
\end{mdframed}

\subsection*{2. Dérivées des fonctions usuelles}

\begin{mdframed}[style=proprieteStyle]
    \textbf{Propriétés :} ~\\

    \renewcommand{\arraystretch}{1.5}
    \begin{tabularx}{\linewidth}{|X|Y|Y|X|}
        \hline
        La fonction $f$ défini par\dots                      & $f$ définie sur\dots         & $f$ dérivable sur\dots       & La fonction dérivable $f'$ défini par\dots \\
        \hline
        \multirow{2}{*}{}$f(x)=k$ ($k\in\mathbb{R}$)         & $\mathbb{R}$                 & $\mathbb{R}$                 & $f'(x)=0$                                  \\
        Fonction constante                                   &                              &                              &                                            \\
        \hline
        \multirow{3}{*}{}$f(x)=ax+b$                         &                              &                              &                                            \\
        ($a$ et $b$ réels)                                   & $\mathbb{R}$                 & $\mathbb{R}$                 & $f'(x)=a$                                  \\
        Fonction affine                                      &                              &                              &                                            \\
        \hline
        \multirow{2}{*}{}$f(x)=x^2$                          & $\mathbb{R}$                 & $\mathbb{R}$                 & $f'(x)=2x$                                 \\
        Fonction carrée                                      &                              &                              &                                            \\
        \hline
        \multirow{2}{*}{}$f(x)=x^3$                          & $\mathbb{R}$                 & $\mathbb{R}$                 & $f'(x)=3x^2$                               \\
        Fonction cube                                        &                              &                              &                                            \\
        \hline
        \multirow{2}{*}{}$f(x)=x^n$ ($x\in \mathbb{N^*}$)    & $\mathbb{R}$                 & $\mathbb{R}$                 & $f'(x)=nx^{n-1}$                           \\
        Fonction puissance                                   &                              &                              &                                            \\
        \hline
        \multirow{2}{*}{}$\displaystyle{}f(x)=\frac{1}{x}$   & $]-\infty;0[\cup]0;+\infty[$ & $]-\infty;0[\cup]0;+\infty[$ & $\displaystyle{}f'(x)=\frac{-1}{x^2}$      \\
        Fonction inverse                                     &                              &                              &                                            \\
                    \hline
        \multirow{2}{*}{}$\displaystyle{}f(x)=\frac{1}{x^n}$ & $]-\infty;0[\cup]0;+\infty[$ & $]-\infty;0[\cup]0;+\infty[$ & $\displaystyle{}f'(x)=\frac{-n}{x^{n+1}}$  \\
        Fonction inverse d'une puissance                     &                              &                              &                                            \\
        \hline
        \multirow{2}{*}{}$f(x)=\sqrt{x}$                     & $[0;+\infty[$                & $]0;+\infty[$                & $\displaystyle{}f'(x)=\frac{1}{2\sqrt{x}}$ \\
        Fonction racine carrée                               &                              &                              &                                            \\
        \hline
    \end{tabularx}
\end{mdframed}

\newpage

\section*{II. Opérations sur les fonctions dérivables}

\begin{mdframed}[style=proprieteStyle]
    \textbf{Propriété :} ~\\
    Soit $u$ et $v$ deux fonctions dérivables sur un intervalle $I$, et $k$ un nombre réel. \\
    Les fonctions suivantes sont dérivables sur $I$ de fonctions dérivées : \\

    \renewcommand{\arraystretch}{2}
    \begin{tabularx}{\linewidth}{|Y|Y|}
        \hline
        \textbf{Fonction}                     & \textbf{Fonction dérivée}                                      \\
        \hline
        Somme $u+v$                           & $(u+v)'=u'+v'$                                                 \\
        \hline
        Produit par un réel $ku$              & $(ku)'=ku'$                                                    \\
        \hline
        Produit $uv$                          & $(uv)'=u'v+uv'$                                                \\
        \hline
        Quotient $\displaystyle{}\frac{u}{v}$ & $\displaystyle{}\left(\frac{u}{v}\right)'=\frac{u'v-uv'}{v^2}$ \\
        \hline
    \end{tabularx}
\end{mdframed}

\begin{mdframed}[style=proprieteStyle]
    \textbf{Propriété \emph{(admise)} :} ~\\
    On considère un intervalle $I$ et $a$ et $b$ deux réels.\\
    Soit $J$ l'intervalle formé des valeurs prises par $ax+b$ lorsque $x$ décrit l'intervalle $I$.\\
    Si la fonction $g$ est dérivable sur $J$, alors la fonction $f$ définie sur $I$ par $f(x)=g(ax+b)$ est dérivable sur $I$ et, pour tout réel $x$ de $I$, on a $f'(x)=a\times g'(ax+b)$.
\end{mdframed}

\section*{III. Application de la dérivation}

\subsection*{1. Étude des variations d'une fonction}

\begin{mdframed}[style=proprieteStyle]
    \textbf{Théorème :} ~\\
    Soit $f$ une fonction dérivable sur un intervalle $I$, de fonction dérivée $f'$.
    \begin{itemize}
        \item Si $f$ est croissante sur $I$, alors $f'$ est positive sur $I$
        \item Si $f$ est décroissante sur $I$, alors $f'$ est négative sur $I$
        \item Si $f$ est constante sur $I$, alors $f'$ est nulle sur $I$
    \end{itemize}
\end{mdframed}

\begin{mdframed}[style=proprieteStyle]
    \textbf{Théorème réciproque \emph{(admis)} :} ~\\
    Soit $f$ une fonction dérivable sur un intervalle $I$, de fonction dérivée $f'$.
    \begin{itemize}
        \item Si $f'$ est strictement positive sur $I$, sauf pour un nombre fini de réel où elle s'annule, alors $f$ est strictement croissante sur $I$
        \item Si $f'$ est strictement négative sur $I$, sauf pour un nombre fini de réel où elle s'annule, alors $f$ est strictement décroissante sur $I$
        \item Si $f'$ est nulle sur $I$, alors $f$ est constante sur $I$
    \end{itemize}
\end{mdframed}

\newpage

\subsection*{2. Étude des extrema d'une fonction}

\begin{mdframed}[style=definitionStyle]
    \textbf{Définition :} ~\\
    Soit $f$ une fonction définie sur un intervalle $I$ et $c$ un réel de $I$ et qui n'est pas une borne de $I$.

    Dire que $f(c)$ est un maximum local de $f$ signifie qu'il existe deux réels $a$ et $b$ dans $I$ tels que $c\in]a;b[$ et que pour tout réel $x\in]a;b[$, $f(x) \leq f(c)$.

    Dire que $f(c)$ est un minimum local de $f$ signifie qu'il existe deux réels $a$ et $b$ dans $I$ tels que $c\in]a;b[$ et que pour tout réel $x\in]a;b[$, $f(x) \geq f(c)$.

    Un extremum local est un minimum ou un maximum local.
\end{mdframed}

\begin{minipage}{0.4\textwidth}
    \begin{tikzpicture}
        \begin{axis}[
                axis lines=middle,
                xmin=-3, xmax=6,
                ymin=-2, ymax=4,
                xtick=\empty,
                ytick=\empty,
                smooth,
                clip=false
            ]
            \addplot+[mark=none, smooth, thick, red, domain=-1:5] {2*sin(0.8*deg(x))+0.8};

            % Calculate the maximum local value of the function
            \pgfmathsetmacro{\xmax}{(3*pi)/4}
            \pgfmathsetmacro{\ymax}{2*sin(0.8*\xmax*180/pi)+0.8}

            % Draw double horizontal arrow
            \draw[dashed, thin, blue] (axis cs:0, 2.8) -- (axis cs:2,2.8);
            \draw[dashed, thin, blue] (axis cs:2, 0) -- (axis cs:2,2.8);
            \draw [<->, dark_green, thick] (axis cs: 1, 2.8) -- (axis cs: 3, 2.8);
            \draw [|-|, dark_green, thick] (axis cs: 1, 0) -- (axis cs: 3, 0);

            \node[label={-90:$\color{dark_green}a$}] at (axis cs:1, 0) {};
            \node[label={-90:$\color{dark_green}b$}] at (axis cs:3, 0.1) {};
            \node[label={-90:$\color{blue}c$}] at (axis cs:2, 0.1) {};
            \node[label={-120:$\color{blue}f(c)$}] at (axis cs:0.2, 3.5) {};

        \end{axis}
    \end{tikzpicture}
\end{minipage}
\hspace{0.05\textwidth}
\begin{minipage}{0.55\textwidth}
    \begin{mdframed}[style=proprieteStyle]
        \textbf{Théorème de la condition nécessaire d'un extremum local \emph{(admis)} :} ~\\
        Soit $f$ une fonction dérivable sur un intervalle ouvert $I$ et $a$ un réel de $I$. \\
        Si $f$ présente un extremum local en $a$ alors $f'(a)=0$.
    \end{mdframed}
    \textbf{Remarque :} La réciproque est fausse. En effet, pour $f:x\mapsto x^3$ on a $f:x\mapsto 3x^2$ donc $f'(0)=0$
    mais $f$ n'admet pas d'extremum local en $O$.
\end{minipage}

\begin{mdframed}[style=proprieteStyle]
    \textbf{Théorème de la condition suffisante sur l'existence d'un extremum local : :} ~\\
    Soit $f$ une fonction dérivable sur un intervalle ouvert $I$, de dérivée $f'$ et $a\in I$.
    Si la dérivée $f'$ s'annule en $a$ en changeant de signe en $a$, alors la fonction $f$ admet un extremum local en $a$.
\end{mdframed}

\end{document}